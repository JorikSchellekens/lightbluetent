{% macro render(id, links, errors) %}
<div>
    <ul id="{{id}}" class="list-group">
        {% for link in links %}
        {{ render_link(link.id, link.)}}
        {% endfor %}
    </ul>
</div>
{% endmacro %}

{% macro render_link(link, errors) %}
<li class="list-group-item">
    <i class="fa fa-fw fa-bars lbt-draggable"></i>
    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <span class="input-group-text" id="basic-addon1">Link address</span>
        </div>
        <input type="text" id="{{link.id}}-url" name="{{id}}-url"
            class="form-control {% if errors[link.id + '-url'] %}is-invalid{% endif %}"
            placeholder="eg. https://www.srcf.net" value="{{link.url}}">
    </div>
    {%- if errors[link.id + '-url'] %}
    <small class="invalid-feedback">{{ errors[link.id + '-url'] }}</small>
    {%- endif %}
    <div class="input-group">
        <div class="input-group-prepend">
            <span class="input-group-text" id="basic-addon1">Link name</span>
        </div>
        <input type="text" id="{{link.id}}-name" name="{{link.id}}-name"
            class="form-control {% if errors[link.id + '-name'] %}is-invalid{% endif %}"
            placeholder="optional sentence to describe your link" value="{{link.name}}">
    </div>
    {%- if errors[link.id + '-name'] %}
    <small class="invalid-feedback">{{ errors[link.id + '-name'] }}</small>
    {%- endif %}
</li>
{% endmacro %}

{% macro match_link(link) -%}
<li>
    {% if link.type == link_type.EMAIL %}
    <!-- Email address -->
    <i class="fa fa-li fa-envelope" title="Link {{link.id}}"></i>
    {% elif link.type ==  link_type.FACEBOOK %}
    <!-- Facebook -->
    <i class="fa fa-li fa-facebook-square" title="Link {{link.id}}"></i>
    {% elif link.type == link_type.TWITTER %}
    <!-- Twitter -->
    <i class="fa fa-li fa-twitter-square" title="Link {{link.id}}"></i>
    {% elif link.type == link_type.INSTAGRAM %}
    <!-- Instagram -->
    <i class="fa fa-li fa-instagram" title="Link {{link.id}}"></i>
    {% elif link.type == link_type.YOUTUBE %}
    <!-- Youtube -->
    <i class="fa fa-li fa-youtube-play" title="Link {{link.id}}"></i>
    {% else %}
    <!-- Other -->
    <i class="fa fa-li fa-globe" title="Link {{link.id}}"></i>
    {% endif %}

    {% if link.type == link_type.EMAIL %}
    <!-- Email address -->
    <a href="mailto:{{ link.url }}">{{ link.url }}</a>
    {% else %}
    {% if link.url.startswith("https://") or link.url.startswith("http://") %}
    <a href="{{ link.url }}">{{ link.url}}</a>
    {% else %}
    <a href="http://{{ link.url }}">{{ link.url}}</a>
    {% endif %}
    {% endif %}
</li>
{%- endmacro %}