{% extends "base.html" %}

{% block scripts %}
<script src="{{ url_for('static', filename='javascripts/rooms.js') }}"></script>
{% endblock %}

{% macro social_field(n, placeholder="e.g. a social media URL", id=("social-"+gen_unique_string())) -%}
<div {% if n != 0 %}class="pt-2" {% endif %}>
    <input type="text" id="{{id}}" name="{{id}}" placeholder="{{placeholder}}"
        class="form-control{% if errors[id] %}is-invalid{% endif %}" value="{{sif(kwargs["url"])}}">
    {%- if errors[id] %}
    <small class="invalid-feedback">{{ errors[id] }}</small>
    {%- endif %}
</div>
{%- endmacro %}

{% macro submit_button() -%}
<div class="form-group mt-2 form-row float-right">
    <input type="submit" class="btn btn-primary" value="Update">
</div>
{%- endmacro %}

    <div class="form-row">
        <div class="col-md-6 px-5">
            <div class="form-group">
                <label for="name">{{ _("Event name") }}</label>
                <input type="text" id="name" name="name" placeholder="e.g. Weekly Meeting"
                    class="form-control{% if errors.name is defined %} is-invalid{% endif %}" value="{{ name }}"
                    required>
                {%- if errors.name is defined %}
                <small class="invalid-feedback">{{ errors.name }}</small>
                {%- endif %}
            </div>
        </div>
    </div>

    <div class="form-row">
        <div class="col-md-6 px-5">
            <div class="form-group">
                <label for="welcome_text">Welcome text</label>
                <input type="text" id="welcome_text" name="welcome_text"
                    placeholder="e.g. Welcome to {{ room.name }}!"
                    class="form-control{% if errors.welcome_text is defined %} is-invalid{% endif %}"
                    value="{% if welcome_text is not none %}{{ welcome_text }}{% endif %}">
                {%- if errors.welcome_text is defined %}
                <small class="invalid-feedback">{{ errors.welcome_text }}</small>
                {%- endif %}
                <small class="form-text text-muted">This message will be shown to all users in the chat when they
                    join your room.</small>
            </div>
            <div class="form-group">
                <label for="banner_text">Banner</label>
                <div class="input-group mb-3">
                    <input type="text" id="banner_text" name="banner_text" class="form-control"
                        placeholder="e.g. Welcome to {{ room.name }}!" aria-label="" aria-describedby="basic-addon1"
                        value="{% if banner_text is not none %}{{ banner_text }}{% endif %}">
                    <div class="input-group-append">
                        <input type="color" id="banner_color" name="banner_color" style="width: 50px"
                            class="input-group-text form-control{% if errors.banner_color is defined %} is-invalid{% endif %}"
                            value="{{ banner_color }}" required>
                    </div>
                </div>
                {%- if errors.banner_text is defined %}
                <small class="text-danger">{{ errors.banner_text }}</small>
                {%- endif %}
                <small class="form-text text-muted">This is an optional field that will add a banner to the top of your room
                    with your chosen banner color.</small>
            </div>
            <div class="form-group form-check">
                <label class="form-check-label">
                    <input type="checkbox" name="mute_on_start" class="form-check-input" {% if mute_on_start %}
                        checked{% endif %}>
                    Mute users on joining
                </label>
                {%- if errors.mute_on_start is defined %}
                <small class="form-text text-danger">{{ errors.mute_on_start }}</small>
                {%- endif %}
            </div>
            <div class="form-group form-check">
                <label class="form-check-label">
                    <input type="checkbox" name="disable_private_chat" class="form-check-input"
                        {% if disable_private_chat %} checked{% endif %}>
                    Disable private chat
                </label>
                {%- if errors.disable_private_chat is defined %}
                <small class="form-text text-danger">{{ errors.disable_private_chat }}</small>
                {%- endif %}
                <small class="form-text text-muted">Prevent attendees from talking to each other individually</small>
            </div>
        </div>
    </div>

    <div class="form-group mt-3 form-row px-5 float-right">
        <input type="submit" class="btn btn-outline-primary mx-2" value="Update">
        <a href="{{ url_for('rooms.delete', room_alias=room.alias) }}"
            class="btn btn-outline-danger float-right">{{ _("Delete event") }}</a>
    </div>
</form>
{% endblock %}
